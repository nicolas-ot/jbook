(this.webpackJsonpjbook=this.webpackJsonpjbook||[]).push([[0],{131:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=131},256:function(e,n,t){},257:function(e,n,t){},258:function(e,n,t){},270:function(e,n,t){},271:function(e,n,t){},273:function(e,n,t){},280:function(e,n,t){},281:function(e,n,t){},693:function(e,n,t){},694:function(e,n,t){},695:function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"updateCell",(function(){return R})),t.d(r,"deleteCell",(function(){return k})),t.d(r,"moveCell",(function(){return D})),t.d(r,"insertCellAfter",(function(){return S})),t.d(r,"createBundle",(function(){return I}));var a,c=t(44),i=t.n(c),s=(t(226),t(227),t(46)),o=t(38),u=t(207),l=t(72);!function(e){e.MOVE_CELL="move_cell",e.DELETE_CELL="delete_cell",e.INSERT_CELL_AFTER="insert_cell_after",e.UPDATE_CELL="update_cell",e.BUNDLE_START="bundle_start",e.BUNDLE_COMPLETE="bundle_complete"}(a||(a={}));var d={loading:!1,error:null,order:[],data:{}},p=Object(l.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case a.UPDATE_CELL:var t=n.payload,r=t.id,c=t.content;return e.data[r].content=c,e;case a.DELETE_CELL:return delete e.data[n.payload],e.order=e.order.filter((function(e){return e!==n.payload})),e;case a.MOVE_CELL:var i=n.payload.direction,s=e.order.findIndex((function(e){return e===n.payload.id})),o="up"===i?s-1:s+1;return o<0||o>e.order.length-1||(e.order[s]=e.order[o],e.order[o]=n.payload.id),e;case a.INSERT_CELL_AFTER:var u={content:"",type:n.payload.type,id:f()};e.data[u.id]=u;var l=e.order.findIndex((function(e){return e===n.payload.id}));return l<0?e.order.unshift(u.id):e.order.splice(l+1,0,u.id),e;default:return e}})),f=function(){return Math.random().toString(36).substr(2,5)},j=p,b={},h=Object(l.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case a.BUNDLE_START:return e[n.payload.cellId]={loading:!0,code:"",err:""},e;case a.BUNDLE_COMPLETE:return e[n.payload.cellId]={loading:!1,code:n.payload.bundle.code,err:n.payload.bundle.err},e;default:return e}})),m=Object(o.c)({cells:j,bundles:h}),v=Object(o.d)(m,{},Object(o.a)(u.a));v.dispatch({type:a.INSERT_CELL_AFTER,payload:{id:null,type:"code"}}),v.dispatch({type:a.INSERT_CELL_AFTER,payload:{id:null,type:"text"}}),v.dispatch({type:a.INSERT_CELL_AFTER,payload:{id:null,type:"code"}}),v.dispatch({type:a.INSERT_CELL_AFTER,payload:{id:null,type:"text"}});var O,x=t(6),y=t.n(x),E=t(20),w=t(208),L=t(107),g=t.n(L),C=t(209),N=t.n(C).a.createInstance({name:"filecache"}),_=function(e){return{name:"fetch-plugin",setup:function(n){n.onLoad({filter:/^index\.js$/},function(){var n=Object(E.a)(y.a.mark((function n(t){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",{loader:"jsx",contents:e});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),n.onLoad({filter:/.*/},function(){var e=Object(E.a)(y.a.mark((function e(n){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getItem(n.path);case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),n.onLoad({filter:/.css$/},function(){var e=Object(E.a)(y.a.mark((function e(n){var t,r,a,c,i,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get(n.path);case 2:return t=e.sent,r=t.data,a=t.request,c=r.replace(/\n/g,"").replace(/"/g,'\\"').replace(/'/g,"\\'"),i="\n          const style = document.createElement('style');\n          style.innerText = '".concat(c,"';\n          document.head.appendChild(style);\n        "),s={loader:"jsx",contents:i,resolveDir:new URL("./",a.responseURL).pathname},e.next=10,N.setItem(n.path,s);case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),n.onLoad({filter:/.*/},function(){var e=Object(E.a)(y.a.mark((function e(n){var t,r,a,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get(n.path);case 2:return t=e.sent,r=t.data,a=t.request,c={loader:"jsx",contents:r,resolveDir:new URL("./",a.responseURL).pathname},e.next=8,N.setItem(n.path,c);case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}}},T=function(){var e=Object(E.a)(y.a.mark((function e(n){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=4;break}return e.next=3,w.startService({worker:!0,wasmURL:"/esbuild.wasm"});case 3:O=e.sent;case 4:return e.prev=4,e.next=7,O.build({entryPoints:["index.js"],bundle:!0,write:!1,plugins:[{name:"unpkg-path-plugin",setup:function(e){e.onResolve({filter:/(^index\.js$)/},(function(){return{path:"index.js",namespace:"a"}})),e.onResolve({filter:/^\.+\//},(function(e){return{namespace:"a",path:new URL(e.path,"https://unpkg.com"+e.resolveDir+"/").href}})),e.onResolve({filter:/.*/},function(){var e=Object(E.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{namespace:"a",path:"https://unpkg.com/".concat(n.path)});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}},_(n)],define:{"process.env.NODE_ENV":'"production"',global:"window"}});case 7:return t=e.sent,e.abrupt("return",{err:"",code:t.outputFiles[0].text});case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",{err:e.t0.message,code:""});case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(n){return e.apply(this,arguments)}}(),R=function(e,n){return{type:a.UPDATE_CELL,payload:{id:e,content:n}}},k=function(e){return{type:a.DELETE_CELL,payload:e}},D=function(e,n){return{type:a.MOVE_CELL,payload:{id:e,direction:n}}},S=function(e,n){return{type:a.INSERT_CELL_AFTER,payload:{id:e,type:n}}},I=function(e,n){return function(){var t=Object(E.a)(y.a.mark((function t(r){var c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:a.BUNDLE_START,payload:{cellId:e}}),t.next=3,T(n);case 3:c=t.sent,r({type:a.BUNDLE_COMPLETE,payload:{cellId:e,bundle:c}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},M=(t(256),t(0)),U=s.c,A=(t(257),t(258),t(221)),F=t(210),z=t.n(F),B=t(24),V=t.n(B),H=(t(270),t(271),t(1)),P=function(e){var n=e.onChange,t=Object(M.useRef)();return Object(H.jsxs)("div",{className:"editor-wrapper",children:[Object(H.jsx)("button",{className:"button button-format is-primary is-small",style:{float:"right"},onClick:function(){var e=t.current.getValue(),n=z.a.format(e,{parser:"babel",plugins:[V.a],useTabs:!1,semi:!0,singleQuote:!0}).replace(/\n$/,"");t.current.setValue(n)},children:"Format"}),Object(H.jsx)(A.a,{onMount:function(e){t.current=e,e.onDidChangeModelContent((function(){n(e.getValue())}))},language:"javascript",theme:"vs-dark",options:{tabSize:2,minimap:{enabled:!1},wordWrap:"on",showUnused:!1,folding:!1,lineNumbersMinChars:3,fontSize:16,scrollBeyondLastLine:!1,automaticLayout:!0}})]})},W=(t(273),"\n    <html>\n      <head>\n        <style>html { background-color: white; }</style>\n      </head>\n      <body>\n        <div id=\"root\"></div>\n        <script>\n          const handleError = (err) => {\n            const root = document.querySelector('#root');\n            root.innerHTML = '<div style=\"color: red;\"><h4>Runtime Error</h4>' + err + '</div>';\n            console.error(err);\n          };\n\n          window.addEventListener('error', (event) => {\n            event.preventDefault();\n            handleError(event.error);\n          });\n\n          window.addEventListener('message', (event) => {\n            try {\n              eval(event.data);\n            } catch (err) {\n              handleError(err);\n            }\n          }, false);\n        <\/script>\n      </body>\n    </html>\n  "),$=function(e){var n=e.code,t=e.err,r=Object(M.useRef)();return Object(M.useEffect)((function(){r.current.srcdoc=W,setTimeout((function(){r.current.contentWindow.postMessage(n,"*")}),50)}),[n]),Object(H.jsxs)("div",{className:"preview-wrapper",children:[Object(H.jsx)("iframe",{title:"preview",ref:r,sandbox:"allow-scripts",srcDoc:W}),t&&Object(H.jsx)("div",{className:"error-message",children:t})]})},q=t(14),J=t(13),Q=t(211),G=(t(280),function(e){var n,t=e.direction,r=e.children,a=Object(M.useState)(window.innerHeight),c=Object(J.a)(a,2),i=c[0],s=c[1],o=Object(M.useState)(window.innerWidth),u=Object(J.a)(o,2),l=u[0],d=u[1],p=Object(M.useState)(.75*window.innerWidth),f=Object(J.a)(p,2),j=f[0],b=f[1];return Object(M.useEffect)((function(){var e,n=function(){e&&clearTimeout(e),e=setTimeout((function(){s(window.innerHeight),j>.75*window.innerWidth&&b(.75*window.innerWidth),d(window.innerWidth)}),200)};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[j]),n="vertical"===t?{width:1/0,height:300,resizeHandles:["s"],minConstraints:[1/0,24],maxConstraints:[1/0,.9*i]}:{className:"resize-horizontal",onResizeStop:function(e,n){b(n.size.width)},height:1/0,width:j,resizeHandles:["e"],minConstraints:[.2*l,1/0],maxConstraints:[.75*l,1/0]},Object(H.jsx)(Q.ResizableBox,Object(q.a)(Object(q.a)({},n),{},{children:r}))}),K=function(){var e=Object(s.b)();return Object(M.useMemo)((function(){return Object(o.b)(r,e)}),[e])},X=t(212),Y=function(e){var n,t=e.cell,r=K(),a=r.updateCell,c=r.createBundle,i=U((function(e){return e.bundles[t.id]})),s=(n=t.id,U((function(e){var t,r=e.cells,a=r.data,c=r.order.map((function(e){return a[e]})),i=[],s=Object(X.a)(c);try{for(s.s();!(t=s.n()).done;){var o=t.value;if("code"===o.type&&(o.id===n?i.push("\n    import _React from 'react';\n    import _ReactDOM from 'react-dom';\n    var show = (value) => {\n      const root = document.querySelector('#root');\n\n      if (typeof value === 'object') {\n        if (value.$$typeof && value.props) {\n          _ReactDOM.render(value, root);\n        } else {\n          root.innerHTML = JSON.stringify(value);\n        }\n      } else {\n        root.innerHTML = value;\n      }\n    };\n  "):i.push("var show = () => {}"),i.push(o.content)),o.id===n)break}}catch(u){s.e(u)}finally{s.f()}return i})).join("\n"));Object(M.useEffect)((function(){if(i){var e=setTimeout(Object(E.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(t.id,s);case 1:case"end":return e.stop()}}),e)}))),750);return function(){clearTimeout(e)}}c(t.id,s)}),[s,t.id,c]);var o=!i||i.loading?Object(H.jsx)("div",{className:"progress-cover",children:Object(H.jsx)("progress",{className:"progress is-small is-primary",max:"100",children:"Loading"})}):Object(H.jsx)($,{code:i.code,err:i.err});return Object(H.jsx)(G,{direction:"vertical",children:Object(H.jsxs)("div",{style:{height:"calc(100% - 10px)",display:"flex",flexDirection:"row"},children:[Object(H.jsx)(G,{direction:"horizontal",children:Object(H.jsx)(P,{code:t.content,onChange:function(e){return a(t.id,e)}})}),Object(H.jsx)("div",{className:"progress-wrapper",children:o})]})})},Z=(t(281),t(113)),ee=function(e){var n=e.cell,t=Object(M.useRef)(null),r=Object(M.useState)(!1),a=Object(J.a)(r,2),c=a[0],i=a[1],s=K().updateCell;return Object(M.useEffect)((function(){var e=function(e){t.current&&e.target&&t.current.contains(e.target)||i(!1)};return document.addEventListener("click",e,{capture:!0}),function(){document.removeEventListener("click",e,{capture:!0})}}),[]),c?Object(H.jsx)("div",{className:"text-editor",ref:t,children:Object(H.jsx)(Z.a,{value:n.content,onChange:function(e){s(n.id,e||"")}})}):Object(H.jsx)("div",{className:"text-editor card",children:Object(H.jsx)("div",{className:"card-content",onClick:function(){i(!0)},children:Object(H.jsx)(Z.a.Markdown,{source:n.content||"Click to edit"})})})},ne=(t(693),function(e){var n=e.id,t=K(),r=t.moveCell,a=t.deleteCell;return Object(H.jsxs)("div",{className:"action-bar",children:[Object(H.jsx)("button",{className:"button is-primary is-small",onClick:function(){return r(n,"up")},children:Object(H.jsx)("span",{className:"icon",children:Object(H.jsx)("i",{className:"fas fa-arrow-up"})})}),Object(H.jsx)("button",{className:"button is-primary is-small",onClick:function(){return r(n,"down")},children:Object(H.jsx)("span",{className:"icon",children:Object(H.jsx)("i",{className:"fas fa-arrow-down"})})}),Object(H.jsx)("button",{className:"button is-primary is-small",onClick:function(){return a(n)},children:Object(H.jsx)("span",{className:"icon",children:Object(H.jsx)("i",{className:"fas fa-times"})})})]})}),te=function(e){var n,t=e.cell;return n="code"===t.type?Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("div",{className:"action-bar-wrapper",children:Object(H.jsx)(ne,{id:t.id})}),Object(H.jsx)(Y,{cell:t})]}):Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(ee,{cell:t}),Object(H.jsx)(ne,{id:t.id})]}),Object(H.jsx)("div",{className:"cell-list-item",children:n})},re=(t(694),function(e){var n=e.forceVisible,t=e.previousCellId,r=K().insertCellAfter;return Object(H.jsxs)("div",{className:"add-cell ".concat(n&&"force-visible"),children:[Object(H.jsxs)("div",{className:"add-buttons",children:[Object(H.jsxs)("button",{className:"button is-rounded is-primary is-small",onClick:function(){return r(t,"code")},children:[Object(H.jsx)("span",{className:"icon is-small",children:Object(H.jsx)("i",{className:"fas fa-plus"})}),Object(H.jsx)("span",{children:"Code"})]}),Object(H.jsxs)("button",{className:"button is-rounded is-primary is-small",onClick:function(){return r(t,"text")},children:[Object(H.jsx)("span",{className:"icon is-small",children:Object(H.jsx)("i",{className:"fas fa-plus"})}),Object(H.jsx)("span",{children:"Text"})]})]}),Object(H.jsx)("div",{className:"divider"})]})}),ae=function(){var e=U((function(e){var n=e.cells,t=n.order,r=n.data;return t.map((function(e){return r[e]}))})),n=e.map((function(e){return Object(H.jsxs)(M.Fragment,{children:[Object(H.jsx)(te,{cell:e}),Object(H.jsx)(re,{previousCellId:e.id})]},e.id)}));return Object(H.jsxs)("div",{className:"cell-list",children:[Object(H.jsx)(re,{forceVisible:0===e.length,previousCellId:null}),n]})},ce=function(){return Object(H.jsx)(s.a,{store:v,children:Object(H.jsx)("div",{children:Object(H.jsx)(ae,{})})})};i.a.render(Object(H.jsx)(ce,{}),document.querySelector("#root"))}},[[695,1,2]]]);
//# sourceMappingURL=main.1069d263.chunk.js.map